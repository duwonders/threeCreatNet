"use strict";$(document).ready(function(){function t(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!=a?decodeURI(a[2]):null}function e(){var t=$("#total-page").text(),e=$("#current-page").text(),a=$(".pager");if(t<5)for(var i=0;i<5;i++)t<i+1&&$(a[i]).css("display","none");else t>5&&(t>6&&e>3&&e<t-2&&($(a[1]).text("..."),$(a[2]).text(e),$(a[3]).text("...")),e<=3?$(a[3]).text("..."):t-e<=2&&($(a[1]).text("..."),$(a[2]).text(t-2),$(a[3]).text(t-1)),$(a[4]).text(t));a.map(function(t,a){var i=$(a);~~i.text()==~~e&&i.addClass("current")}),$(".page-outer-container").css("display","block")}e();var a=function(){var e={};return function(a){var i=arguments.length<=1||void 0===arguments[1]?t("type"):arguments[1];e.type=i||"最近",e.page=a||1,window.location.href="/speak?type="+e.type+"&page="+e.page}}();$(".top-page").bind("click",function(t){if(t=t||window.event,"a"==t.target.nodeName.toLowerCase()){t.preventDefault();var e=$(t.target).text().trim().slice(0,2);a(1,e)}}),$(".page-outer-container").bind("click",function(t){if(t=t||window.event,"pager"==t.target.className){var e=(t.target,~~$(t.target).text());e>0&&a(e)}}),$("#prev").bind("click",function(){var e=~~t("page"),i=e-1;1==e?alert("已经是第一页"):a(i)}),$("#next").bind("click",function(){var e=~~t("page"),i=~~$("#total-page").text(),r=e+1;e==i?alert("已经是最后一页"):a(r)}),$("#page-go").bind("click",function(){var t=~~$("#total-page").text(),e=~~$("#page-input").val();e>=1&&e<=t?a(e):alert("无效的页数")});var i={};$(".main-con-item").bind("click",function(){var t=$("#cover");t.addClass("cover-show"),i=this,$("#article-title").text($(this.querySelector(".title")).text()),$("#article-author").text($(this.querySelector(".item-author")).text()),$("#article-date").text($(this.querySelector(".item-time")).text()),$("#article-like").text($(this.querySelector(".item-like")).text()),$("#article-view").text(~~$(this.querySelector(".item-view")).text()+1),$("#article-current").text($(this.querySelector(".item-id")).text()),document.querySelector("#article-content").innerHTML=$(this.querySelector(".content")).text()}),$("#cover-close").bind("click",function(){var t=$("#cover"),e={};e.id=$("#article-current").text(),e.atc_view=$("#article-view").text(),e.atc_likes=$("#article-like").text(),$.ajax({url:"/home/speak/updatedata",data:e,type:"POST",dataType:"json"}),$(i.querySelector(".item-like")).text(e.atc_likes),$(i.querySelector(".item-view")).text(e.atc_view),t.removeClass("cover-show"),$(".icon-heart").removeClass("liked")}),$(".icon-heart").bind("click",function(){var t=~~$("#article-like").text();$(this).hasClass("liked")||($("#article-like").text(++t),$(".icon-heart").addClass("liked"))})});