"use strict";$(document).ready(function(){function t(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?decodeURI(i[2]):null}function e(){var t=$("#total-page").text(),e=$("#current-page").text(),i=$(".pager");if(t<5)for(var a=0;a<5;a++)t<a+1&&$(i[a]).css("display","none");else t>5&&(t>6&&e>3&&e<t-2&&($(i[1]).text("..."),$(i[2]).text(e),$(i[3]).text("...")),e<=3?$(i[3]).text("..."):t-e<=2&&($(i[1]).text("..."),$(i[2]).text(t-2),$(i[3]).text(t-1)),$(i[4]).text(t));i.map(function(t,i){var a=$(i);~~a.text()==~~e&&a.addClass("current")}),$(".page-outer-container").css("display","block")}e();var i=function(){var e={};return function(i){var a=arguments.length<=1||void 0===arguments[1]?t("type"):arguments[1];e.type=a||"最近",e.page=i||1,window.location.href="/speak?type="+a+"&page="+i}}();$(".top-page").bind("click",function(t){if(t=t||window.event,"a"==t.target.nodeName.toLowerCase()){t.preventDefault();var e=$(t.target).text().trim().slice(0,2);i(1,e)}}),$(".page-outer-container").bind("click",function(t){if(t=t||window.event,"pager"==t.target.className){var e=(t.target,~~$(t.target).text());e>0&&i(e)}}),$("#prev").bind("click",function(){var e=~~t("page"),a=e-1;1==e?alert("已经是第一页"):i(a)}),$("#next").bind("click",function(){var e=~~t("page"),a=~~$("#total-page").text(),r=e+1;e==a?alert("已经是最后一页"):i(r)}),$("#page-go").bind("click",function(){var t=~~$("#total-page").text(),e=~~$("#page-input").val();e>=1&&e<=t?i(e):alert("无效的页数")});var a={};$(".main-con-item").bind("click",function(){var t=$("#cover");t.addClass("cover-show"),a=this,$("#article-title").text($(this.querySelector(".title")).text()),$("#article-author").text($(this.querySelector(".item-author")).text()),$("#article-date").text($(this.querySelector(".item-time")).text()),$("#article-like").text($(this.querySelector(".item-like")).text()),$("#article-view").text(~~$(this.querySelector(".item-view")).text()+1),$("#article-current").text($(this.querySelector(".item-id")).text()),document.querySelector("#article-content").innerHTML=$(this.querySelector(".content")).text()}),$("#cover-close").bind("click",function(){var t=$("#cover"),e={};e.id=$("#article-current").text(),e.atc_view=$("#article-view").text(),e.atc_likes=$("#article-like").text(),$.ajax({url:"/home/speak/updatedata",data:e,type:"POST",dataType:"json"}),$(a.querySelector(".item-like")).text(e.atc_likes),$(a.querySelector(".item-view")).text(e.atc_view),t.removeClass("cover-show"),$(".icon-heart").removeClass("liked")}),$(".icon-heart").bind("click",function(){var t=~~$("#article-like").text();$(this).hasClass("liked")||($("#article-like").text(++t),$(".icon-heart").addClass("liked"))})});